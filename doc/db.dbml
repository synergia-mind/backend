// Database Schema for Synergia Mind Backend

Table models {
  id uuid [pk, default: `gen_random_uuid()`]
  name varchar(255) [not null]
  provider varchar(100) [not null]
  price_per_million_tokens decimal(10,6) [not null, default: 0]
  is_enabled boolean [not null, default: true]
  created_at timestamp [not null, default: `now()`]
  updated_at timestamp [not null, default: `now()`]
  
  indexes {
    (provider, name)
    is_enabled
  }
}

Table chats {
  id uuid [pk, default: `gen_random_uuid()`]
  user_id uuid [not null]
  title varchar(500)
  summary text
  is_deleted boolean [not null, default: false]
  created_at timestamp [not null, default: `now()`]
  updated_at timestamp [not null, default: `now()`]
  
  indexes {
    user_id
    (user_id, is_deleted)
    created_at
  }
}

Table messages {
  id uuid [pk, default: `gen_random_uuid()`]
  chat_id uuid [not null]
  model_id uuid [not null]
  type varchar(50) [not null] // 'user', 'assistant', 'system', etc.
  content text [not null]
  tokens integer
  feedback varchar(20) // 'positive', 'negative', null
  is_deleted boolean [not null, default: false]
  created_at timestamp [not null, default: `now()`]
  updated_at timestamp [not null, default: `now()`]
  
  indexes {
    chat_id
    (chat_id, is_deleted)
    created_at
    model_id
  }
}

// Relationships
Ref: messages.chat_id > chats.id
Ref: messages.model_id > models.id
